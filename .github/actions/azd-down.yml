name: azd-down
description: Deletes the azure infrastructure for the application

inputs:
  envName:
    required: true
  environmentType:
    default: ""
  location:
    required: true
    default: ${{ vars.AZURE_LOCATION }}
  subscriptionId:
    required: true
    default: ${{ vars.AZURE_SUBSCRIPTION_ID }}
  tenantId:
    required: true
    default: ${{ vars.AZURE_TENANT_ID }}

runs:
  using: "composite"
  steps:
    - name: Delete the Azure Infrastructure
      env:
        AZURE_ENV_NAME: ${{ inputs.envName }}
        AZURE_LOCATION: ${{ inputs.location }}
        AZURE_TENANT_ID: ${{ inputs.tenantId }}
        AZURE_SUBSCRIPTION_ID: ${{ inputs.subscriptionId }}
        AZURE_DEVCENTER_ENVIRONMENT_TYPE: ${{ inputs.environmentType }}
      steps:
        - name: Deletes the azure infrastructure for the application
          run: azd down --force --purge --no-prompt
